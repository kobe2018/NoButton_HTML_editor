<!DOCTYPE HTML>
<html lang="ja">
<head>
<title>ğŸ“å¯¾è©±ã‚¨ãƒ‡ã‚£ã‚¿</title>
<meta charset="utf-8" />
<script src="./function_company.js"></script>

<link rel="stylesheet" type="text/css" href="css_text_editor.css"><style></style>

<script src="./return/function_return_change_textarea_to_svg.js"></script>
<script src="./return/function_return_safeEval.js"></script>
<script src="./return/function_return_split_textarea_on_newLine.js"></script>
<script src="./return/function_return_string_width.js"></script>

<script src="./function_output_time.js"></script>
<script src="./function_save_scroll.js"></script>

<script src="./function_create_block_shape.js"></script>
<script src="./function_create_math_graph_bar.js"></script>
<script src="./function_create_math_graph_plot.js"></script>

<script src="./function_create_math_calc.js"></script>
<script src="./function_create_math_log.js"></script>
<script src="./function_create_math_factor.js"></script>
<script src="./function_create_math_expand.js"></script>

<script src="./function_create_speech.js"></script>
<script src="./function_create_map.js"></script>
<script src="./function_create_help.js"></script>

<script src="./function_keydown.js"></script>
<script src="./function_keyup.js"></script>

<script>
"use strict";
var esc_flag=true;
window.addEventListener("DOMContentLoaded",function(){
    let element = document.querySelector('textarea');
    document.querySelector('body').style.backgroundColor = 'white';
    
    keydown(element);
    keyup(element);

/*
    document.getElementById("ID_textarea01").addEventListener("dragover", function(e){
        e.preventDefault();//ãƒ–ãƒ©ã‚¦ã‚¶ãƒ¼ã§ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é–‹ã‹ãªã„ã‚ˆã†ã«ã™ã‚‹
        document.getElementById("ID_textarea01").style.backgroundColor = "yellow";
    },false);

    document.getElementById("ID_textarea01").addEventListener("dragleave", function(e){
        e.preventDefault();//ãƒ–ãƒ©ã‚¦ã‚¶ãƒ¼ã§ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é–‹ã‹ãªã„ã‚ˆã†ã«ã™ã‚‹
        document.getElementById("ID_textarea01").style.backgroundColor = "white";
    },false);

    document.getElementById("ID_textarea01").addEventListener("drop", function(e){
        //event.preventDefault();//ãƒ–ãƒ©ã‚¦ã‚¶ãƒ¼ã§ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é–‹ã‹ãªã„ã‚ˆã†ã«ã™ã‚‹
        document.getElementById("ID_textarea01").style.backgroundColor = "white";
        let f = e.dataTransfer.files;
        console.log(f);
        //alert("name: "+f[0].name +"\nsize: " + f[0].size +"\ntype:"+ f[0].type );

        let str1 = e.dataTransfer.types;
        console.log(str1);

        //let str2 = event.dataTransfer.types[0].getData();
        //console.log(str2);

        var data_transfer = event.dataTransfer;
    },false);


document.getElementById("ID_textarea01").addEventListener("drop", onDrop, false);

function onDrop(event){
    event.preventDefault();//ãƒ–ãƒ©ã‚¦ã‚¶ãƒ¼ã§ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é–‹ã‹ãªã„ã‚ˆã†ã«ã™ã‚‹
         var files = event.dataTransfer.files;
         var encode_type = document.getElementById("ID_textarea01").value;
             // è¤‡æ•°ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰1ã¤ãšã¤ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é¸æŠ
         for(var i=0; i< files.length; i++){
            var f = files[i];
        // â‘ FileReaderã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®ç”Ÿæˆ
        var reader = new FileReader();
        // â‘¡ç”»åƒãƒ•ã‚¡ã‚¤ãƒ«ã‹ãƒ†ã‚­ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚’åˆ¤å®š
        if(!f.type.match('image.*') && !f.type.match('text.plain') && !f.name.match(/csv$/m)){
           alert("ç”»åƒãƒ•ã‚¡ã‚¤ãƒ«ã¨ãƒ†ã‚­ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ä»¥å¤–ã¯è¡¨ç¤ºã§ãã¾ã›ã‚“ã€‚");
           continue;
        }
                // â‘¢ã‚¨ãƒ©ãƒ¼ç™ºç”Ÿæ™‚ã®å‡¦ç†
        reader.onerror = function (evt) {
            }
                // â‘£ç”»åƒãƒ•ã‚¡ã‚¤ãƒ«ã®å ´åˆã®å‡¦ç†

                // â‘¤ãƒ†ã‚­ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã®å ´åˆã®å‡¦ç†
        if (f.type.match('text.*') ) {
           // ãƒ•ã‚¡ã‚¤ãƒ«èª­å–ãŒå®Œäº†ã—ãŸéš›ã«å‘¼ã°ã‚Œã‚‹å‡¦ç†
           reader.onload = function (evt) {
           // FileReaderãŒå–å¾—ã—ãŸãƒ†ã‚­ã‚¹ãƒˆã‚’ãã®ã¾ã¾divã‚¿ã‚°ã«å‡ºåŠ›
              //disp.innerHTML ="[ "+ f.name+"]<br/>"+reader.result;
           }
           // readAsTextãƒ¡ã‚½ãƒƒãƒ‰ã§ãƒ•ã‚¡ã‚¤ãƒ«ã®å†…å®¹ã‚’å–å¾—
           reader.readAsText(f, encode_type);    // 'utf-8' 'shift-jis' ï½¥ï½¥ï½¥ï½¥ï½¥
        }
    }
}
>speech[english]
    */
   
    //window.onbeforeunload = function(e){
      //  e.returnValue = "saveã—ã¾ã—ãŸã‹ï¼Ÿ";
    //}
/*
>(x+1)Â²
>(ax+b)^2
>(x+1)Â³
>calc[
v=PLÂ²/6EI 

P:23[N]
E:34
I:22[W]
L:200
æ—¥æœ¬ï¼å±±ï¼‹å·
å±±ï¼š14å±±
å·ï¼š20å·
>]

  PLÂ²
v=â€’â€’â€’
  6EI
  */
 //wrap : off
}, true);

</script>
</head>
<body>
<textarea id="ID_textarea01" wrap="soft" width="">ä½¿ã„æ–¹ä¾‹â†’ã€Œ>ã€+ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰+Enterã‚­ãƒ¼ã§çµæœãŒå‡ºåŠ›ã•ã‚Œã¾ã™ã€‚ä¾‹ã€Œ>helpã€
>help
>plot[y=Math.sin(x)]
>plot[r=Î¸]
ã‚µãƒ³ãƒ—ãƒ«ãƒ†ã‚­ã‚¹ãƒˆ
â›°ğŸ—¼â”‚
>ã€€ã€€â”˜
</textarea>
</body>